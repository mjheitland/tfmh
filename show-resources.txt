
# module.compute.aws_instance.tfmh_server[0]:
resource "aws_instance" "tfmh_server" {
    ami                          = "ami-010fae13a16763bb4"
    arn                          = "arn:aws:ec2:eu-central-1:094033154904:instance/i-0806970ef87f0d313"
    associate_public_ip_address  = true
    availability_zone            = "eu-central-1a"
    cpu_core_count               = 1
    cpu_threads_per_core         = 1
    disable_api_termination      = false
    ebs_optimized                = false
    get_password_data            = false
    id                           = "i-0806970ef87f0d313"
    instance_state               = "running"
    instance_type                = "t2.micro"
    ipv6_address_count           = 0
    ipv6_addresses               = []
    key_name                     = "tfmh_key"
    monitoring                   = false
    primary_network_interface_id = "eni-075739698f97946b9"
    private_dns                  = "ip-10-50-101-17.eu-central-1.compute.internal"
    private_ip                   = "10.50.101.17"
    public_dns                   = "ec2-18-196-135-78.eu-central-1.compute.amazonaws.com"
    public_ip                    = "18.196.135.78"
    security_groups              = []
    source_dest_check            = true
    subnet_id                    = "subnet-035657719c79c72e3"
    tags                         = {
        "name"         = "tfmh_server_0"
        "project_name" = "tfmh"
    }
    tenancy                      = "default"
    user_data                    = "30cbf5da105ecf0fbf324083481d4e16f361b31b"
    volume_tags                  = {}
    vpc_security_group_ids       = [
        "sg-0f6096fb8e207a878",
    ]

    credit_specification {
        cpu_credits = "standard"
    }

    root_block_device {
        delete_on_termination = true
        encrypted             = false
        iops                  = 100
        volume_id             = "vol-08e0f824eba37ad31"
        volume_size           = 8
        volume_type           = "gp2"
    }
}

# module.compute.aws_key_pair.tfmh_keypair:
resource "aws_key_pair" "tfmh_keypair" {
    fingerprint = "b5:00:8a:aa:a6:c4:38:64:9c:f3:1c:d6:60:54:e9:ba"
    id          = "tfmh_key"
    key_name    = "tfmh_key"
    public_key  = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDvsY4SeOwr4H7eBjcs3EkvGcYoN7ZW5ss6jokzuEu5T3Zvuu1JHhbb7j+zqY6SmVz8YZbngMySva5ym3/bAuimlvMAuk1O0bcAaBvjqhOxozsRPrLHyM/8koO74GrDrSndcNGVINGapKnhcWIKgd3WAYhJGuUGAeJRdCE9XUex4ZWmp4DheQNNGQOo3ehTRtPYtsu71CVHlqehCOw75+O5x4U3/PiJSA3kx6rZp17Cm8xxLtKyp3eSp5N01Pdum9KisAXqQ1GqIDiWnpgsx56DdLgBwi+7Pa7S2lLHEEXS3stbhCYt7uk5DJGhsTryhbptShoiBYiY0c+LbqSvdM84KEEgR95iKcIYwb1mTRRQghl08xaF/ECsqAbuO7WtjK8iLnOZh9ROqMv8gAuAW2U8burpK18iyRC1W8IdYsjQpyIlsj3L1xskbVCgG2UUa6lWGGvgA77VbKAIIPN/eY77MovSFTWQ8z5j4TtPWhV9fh38EuEXP/lt6gL/HtvYgiNl7PsYfNI/AfEl07E7AWztPEQQ5lxLpEMowqtWjE4PL2aIFPlCBX6uqJ1J4tJ0+pmGtlNeWEddVxpFjkEnAh5BbOhWDlE53cjYKkWOCibv50urW57iTrQzk2EIVfvlHeUB4+vKGyzz3EAWKRYTyUtSLQG0vJ+rAgjtkFX5UPD+PQ== heitlm@amazon.de"
}

# module.compute.data.aws_ami.tfmh_server_ami:
data "aws_ami" "tfmh_server_ami" {
    architecture          = "x86_64"
    block_device_mappings = [
        {
            device_name  = "/dev/xvda"
            ebs          = {
                "delete_on_termination" = "true"
                "encrypted"             = "false"
                "iops"                  = "0"
                "snapshot_id"           = "snap-09f8ecea772ac514e"
                "volume_size"           = "8"
                "volume_type"           = "gp2"
            }
            no_device    = ""
            virtual_name = ""
        },
    ]
    creation_date         = "2019-08-26T20:12:17.000Z"
    description           = "Amazon Linux AMI 2018.03.0.20190826 x86_64 HVM gp2"
    hypervisor            = "xen"
    id                    = "ami-010fae13a16763bb4"
    image_id              = "ami-010fae13a16763bb4"
    image_location        = "amazon/amzn-ami-hvm-2018.03.0.20190826-x86_64-gp2"
    image_owner_alias     = "amazon"
    image_type            = "machine"
    most_recent           = true
    name                  = "amzn-ami-hvm-2018.03.0.20190826-x86_64-gp2"
    owner_id              = "137112412989"
    owners                = [
        "amazon",
    ]
    product_codes         = []
    public                = true
    root_device_name      = "/dev/xvda"
    root_device_type      = "ebs"
    root_snapshot_id      = "snap-09f8ecea772ac514e"
    sriov_net_support     = "simple"
    state                 = "available"
    state_reason          = {
        "code"    = "UNSET"
        "message" = "UNSET"
    }
    tags                  = {}
    virtualization_type   = "hvm"

    filter {
        name   = "name"
        values = [
            "amzn-ami-hvm*-x86_64-gp2",
        ]
    }
}

# module.compute.data.template_file.tfmh_userdata:
data "template_file" "tfmh_userdata" {
    id       = "15bde874ad8736ca58562793da156f0230c12fc9c24a35782500ab45fcddd1bf"
    rendered = "#!/bin/bash\nyum install httpd -y\necho \"Subnet for Firewall: element(var.subpub_cidrs, count.index)\" >> /var/www/html/index.html\nservice httpd start\nchkconfig httpd on\n"
    template = "#!/bin/bash\nyum install httpd -y\necho \"Subnet for Firewall: ${firewall_subnets}\" >> /var/www/html/index.html\nservice httpd start\nchkconfig httpd on\n"
    vars     = {
        "firewall_subnets" = "element(var.subpub_cidrs, count.index)"
    }
}


# module.networking.aws_default_route_table.tfmh_rtprv:
resource "aws_default_route_table" "tfmh_rtprv" {
    default_route_table_id = "rtb-04c2617a9a1b15f2c"
    id                     = "rtb-04c2617a9a1b15f2c"
    owner_id               = "094033154904"
    route                  = []
    tags                   = {
        "name"         = "tfmh_tfmh_rtprv"
        "project_name" = "tfmh"
    }
    vpc_id                 = "vpc-03422079e444d3361"
}

# module.networking.aws_internet_gateway.tfmh_igw:
resource "aws_internet_gateway" "tfmh_igw" {
    id       = "igw-096bc2014ffb66791"
    owner_id = "094033154904"
    tags     = {
        "name"         = "tfmh_igw"
        "project_name" = "tfmh"
    }
    vpc_id   = "vpc-03422079e444d3361"
}

# module.networking.aws_route_table.tfmh_rtpub:
resource "aws_route_table" "tfmh_rtpub" {
    id               = "rtb-0182adb0e66008580"
    owner_id         = "094033154904"
    propagating_vgws = []
    route            = [
        {
            cidr_block                = "0.0.0.0/0"
            egress_only_gateway_id    = ""
            gateway_id                = "igw-096bc2014ffb66791"
            instance_id               = ""
            ipv6_cidr_block           = ""
            nat_gateway_id            = ""
            network_interface_id      = ""
            transit_gateway_id        = ""
            vpc_peering_connection_id = ""
        },
    ]
    tags             = {
        "name"         = "tfmh_tfmh_rtpub"
        "project_name" = "tfmh"
    }
    vpc_id           = "vpc-03422079e444d3361"
}

# module.networking.aws_route_table_association.tfmh_rtpubassoc[0]:
resource "aws_route_table_association" "tfmh_rtpubassoc" {
    id             = "rtbassoc-09991799c82fbb7d3"
    route_table_id = "rtb-0182adb0e66008580"
    subnet_id      = "subnet-035657719c79c72e3"
}

# module.networking.aws_security_group.tfmh_sg:
resource "aws_security_group" "tfmh_sg" {
    arn                    = "arn:aws:ec2:eu-central-1:094033154904:security-group/sg-0f6096fb8e207a878"
    description            = "Used for access to the public instances"
    egress                 = [
        {
            cidr_blocks      = [
                "0.0.0.0/0",
            ]
            description      = ""
            from_port        = 0
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "-1"
            security_groups  = []
            self             = false
            to_port          = 0
        },
    ]
    id                     = "sg-0f6096fb8e207a878"
    ingress                = [
        {
            cidr_blocks      = [
                "0.0.0.0/0",
            ]
            description      = ""
            from_port        = 22
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 22
        },
        {
            cidr_blocks      = [
                "0.0.0.0/0",
            ]
            description      = ""
            from_port        = 80
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 80
        },
        {
            cidr_blocks      = [
                "0.1.2.3/32",
            ]
            description      = ""
            from_port        = 27017
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 27017
        },
    ]
    name                   = "tfmh_sgpub"
    owner_id               = "094033154904"
    revoke_rules_on_delete = false
    tags                   = {
        "name"         = "tfmh_sgpub"
        "project_name" = "tfmh"
    }
    vpc_id                 = "vpc-03422079e444d3361"
}

# module.networking.aws_subnet.tfmh_subprv[1]:
resource "aws_subnet" "tfmh_subprv" {
    arn                             = "arn:aws:ec2:eu-central-1:094033154904:subnet/subnet-0adf6f74a68d4c98e"
    assign_ipv6_address_on_creation = false
    availability_zone               = "eu-central-1b"
    availability_zone_id            = "euc1-az3"
    cidr_block                      = "10.50.202.0/24"
    id                              = "subnet-0adf6f74a68d4c98e"
    map_public_ip_on_launch         = true
    owner_id                        = "094033154904"
    tags                            = {
        "name"         = "tfmh_subprv_2"
        "project_name" = "tfmh"
    }
    vpc_id                          = "vpc-03422079e444d3361"
}

# module.networking.aws_subnet.tfmh_subprv[0]:
resource "aws_subnet" "tfmh_subprv" {
    arn                             = "arn:aws:ec2:eu-central-1:094033154904:subnet/subnet-04e0e45e81628f01a"
    assign_ipv6_address_on_creation = false
    availability_zone               = "eu-central-1a"
    availability_zone_id            = "euc1-az2"
    cidr_block                      = "10.50.201.0/24"
    id                              = "subnet-04e0e45e81628f01a"
    map_public_ip_on_launch         = true
    owner_id                        = "094033154904"
    tags                            = {
        "name"         = "tfmh_subprv_1"
        "project_name" = "tfmh"
    }
    vpc_id                          = "vpc-03422079e444d3361"
}

# module.networking.aws_subnet.tfmh_subpub[0]:
resource "aws_subnet" "tfmh_subpub" {
    arn                             = "arn:aws:ec2:eu-central-1:094033154904:subnet/subnet-035657719c79c72e3"
    assign_ipv6_address_on_creation = false
    availability_zone               = "eu-central-1a"
    availability_zone_id            = "euc1-az2"
    cidr_block                      = "10.50.101.0/24"
    id                              = "subnet-035657719c79c72e3"
    map_public_ip_on_launch         = true
    owner_id                        = "094033154904"
    tags                            = {
        "name"         = "tfmh_subpub_1"
        "project_name" = "tfmh"
    }
    vpc_id                          = "vpc-03422079e444d3361"
}

# module.networking.aws_vpc.tfmh_vpc:
resource "aws_vpc" "tfmh_vpc" {
    arn                              = "arn:aws:ec2:eu-central-1:094033154904:vpc/vpc-03422079e444d3361"
    assign_generated_ipv6_cidr_block = false
    cidr_block                       = "10.50.0.0/16"
    default_network_acl_id           = "acl-0c347b3111632d8e1"
    default_route_table_id           = "rtb-04c2617a9a1b15f2c"
    default_security_group_id        = "sg-0282051e06937ee4f"
    dhcp_options_id                  = "dopt-ff739395"
    enable_dns_hostnames             = true
    enable_dns_support               = true
    id                               = "vpc-03422079e444d3361"
    instance_tenancy                 = "default"
    main_route_table_id              = "rtb-04c2617a9a1b15f2c"
    owner_id                         = "094033154904"
    tags                             = {
        "name"         = "tfmh_vpc"
        "project_name" = "tfmh"
    }
}

# module.networking.data.aws_availability_zones.available:
data "aws_availability_zones" "available" {
    id       = "2019-10-08 09:46:41.119149 +0000 UTC"
    names    = [
        "eu-central-1a",
        "eu-central-1b",
        "eu-central-1c",
    ]
    zone_ids = [
        "euc1-az2",
        "euc1-az3",
        "euc1-az1",
    ]
}


Outputs:

igw_id = "igw-096bc2014ffb66791"
keypair_id = "tfmh_key"
project_name = "tfmh"
rtprv_ids = [
    "rtb-04c2617a9a1b15f2c",
]
rtpub_ids = [
    "rtb-0182adb0e66008580",
]
server_ids = "i-0806970ef87f0d313"
server_public_ips = "18.196.135.78"
sg_id = "sg-0f6096fb8e207a878"
subprv_ids = [
    "subnet-04e0e45e81628f01a",
    "subnet-0adf6f74a68d4c98e",
]
subpub_ids = [
    "subnet-035657719c79c72e3",
]
vpc_id = "vpc-03422079e444d3361"
